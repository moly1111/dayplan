# XKM 版本说明

`xkm/` 是 Dayplan 的个人定制版，在主站基础上增加：

- 顶部实时时钟（Light/Dark 主题自适应）
- 任务"预期完成时间"按钮（调用 DeepSeek AI）
- 总用时汇总（超出当天剩余时间时标红）
- 快捷任务功能（常用任务一键添加，自动继承预估时间）
- 本地存储的 DeepSeek API Key（不上传、不出现在仓库）

## 使用步骤

### 基础设置
1. 本地或线上打开 `http://your-host/xkm/`
2. 右上角进入「设置」→ AI 区域，填入你的 **DeepSeek API Key**
3. 返回任务列表，点击每个任务右侧的「预期完成时间」按钮获取 AI 预估（分钟）
4. 总用时会自动累加，超出今日剩余时间时会标红提示

### 快捷任务功能
1. 点击「Today」标题右侧的「快捷任务」按钮
2. 在面板中输入任务内容并点击「添加」，系统会自动调用 AI 预估时间
3. 下次使用该快捷任务时，会直接使用保存的预估时间，无需重新预估
4. 快捷任务支持编辑、删除操作

### 编辑预估时间
- **普通任务**：双击任务右侧的预估时间（绿色框），可手动修改分钟数
- **快捷任务**：双击快捷任务列表中的时间标签，可手动修改分钟数
- 修改后会自动更新总用时和快捷任务数据

## 路径与运行
- 需通过 HTTP 访问，推荐本地静态服务器：
  ```bash
  # 项目根目录
  python -m http.server 8000
  # 或
  npx http-server .
  ```
  访问 `http://localhost:8000/xkm/`

- 已使用 **绝对路径** `/xkm/...` 引用本目录资源，适配 Vercel 等线上部署。使用 file:// 打开会 404，请务必用静态服务器。

## 数据与隐私
- 所有数据仅存浏览器 `localStorage`，API Key 也只保存在本地，不上传服务器。
- 清理浏览器数据会导致任务、快捷任务与 Key 丢失，请定期在设置里备份 JSON。

## 功能特性

### AI 预估时间
- 点击「预期完成时间」按钮，自动调用 DeepSeek API 预估任务完成时间
- 预估时间会保存到任务数据中，刷新页面后仍会显示
- 预估失败时显示红色；再次成功会自动清除错误状态并显示分钟数
- 支持双击预估时间手动修改

### 快捷任务
- 常用任务一键添加，提高效率
- 添加快捷任务时自动调用 AI 预估时间
- 快捷任务会保存预估时间，下次使用时直接继承，无需重新预估
- 支持编辑任务内容和删除操作
- 快捷任务列表显示预估时间标签
- **双击时间标签可手动修改预估时间**
- 未预估的任务显示"预估"按钮，点击后自动调用 AI 预估

### 总用时统计
- 自动计算所有未完成任务的总预估时间
- 超出今日剩余时间时会标红警告
- 完成任务或删除任务后自动更新

## 已知交互
- 只有未完成任务显示"预期完成时间"按钮；完成或删除后总用时自动更新
- 快捷任务面板点击外部区域会自动关闭
- 预估时间支持双击编辑，输入无效数字会提示错误

---
数据丢失不可恢复，请定期备份。



